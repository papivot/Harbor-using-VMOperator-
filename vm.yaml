---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: harbor-pvc
spec:
  accessModes:
  - ReadWriteOnce
  resources:
    requests:
      storage: 5Gi
  storageClassName: vc01cl01-t0compute
  volumeMode: Filesystem
---
apiVersion: v1
kind: ConfigMap
metadata:
    name: harbor-configmap
data:
  hostname: vmware-harbor
  public-keys: ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC5KYNeWQgVHrDHaEhBCLF1vIR0OAtUIJwjKYkY4E/5HhEu8fPFvBOIHPFTPrtkX4vzSiMFKE5WheKGQIpW3HHlRbmRPc9oe6nNKlsUfFAaJ7OKF146Gjpb7lWs/C34mjdtxSb1D/YcHSyqK5mxhyHAXPeK8lrxG5MLOJ3X2A3iUvXcBo1NdhRdLRWQmyjs16fnPx6840x9n5NqeiukFYIVhDMFErq42AkeewsWcbZQuwViSLk2cIc09eykAjaXMojCmSbjrj0kC3sbYX+HD2OWbKohTqqO6/UABtjYgTjIS4PqsXWk63dFdcxF6ukuO6ZHaiY7h3xX2rTg9pv1oT8WBR44TYgvyRp0Bhe0u2/n/PUTRfp22cOWTA2wG955g7jOd7RVGhtMHi9gFXeUS2KodO6C4XEXC7Y2qp9p9ARlNvu11QoaDyH3l0h57Me9we+3XQNuteV69TYrJnlgWecMa/x+rcaEkgr7LD61dY9sTuufttLBP2ro4EIWoBY6F1Ozvcp8lcgi/55uUGxwiKDA6gQ+UA/xtrKk60s6MvYMzOxJiUQbWYr3MJ3NSz6PJVXMvlsAac6U+vX4U9eJP6/C1YDyBaiT96cb/B9TkvpLrhPwqMZdYVomVHsdY7YriJB93MRinKaDJor1aIE/HMsMpbgFCNA7mma9x5HS/57Imw== admin@corp.local
  # Append value of vm-cloudinit.txt|base64
  user-data: I2Nsb3VkLWNvbmZpZwoKcGFja2FnZV91cGRhdGU6IHRydWUKcGFja2FnZV91cGdyYWRlOiB0cnVlCgpzc2g6CiAgZW1pdF9rZXlzX3RvX2NvbnNvbGU6IGZhbHNlCgpub19zc2hfZmluZ2VycHJpbnRzOiB0cnVlCgpncm91cHM6CiAgLSBkb2NrZXIKCnN5c3RlbV9pbmZvOgogIGRlZmF1bHRfdXNlcjoKICAgIGdyb3VwczogW2RvY2tlcl0KCnNzaF9wd2F1dGg6IHRydWUKdXNlcnM6CiAgLSBuYW1lOiB2bXdhcmUtc3lzdGVtLXVzZXIKICAgIHN1ZG86IEFMTD0oQUxMKSBOT1BBU1NXRDpBTEwKICAgIGxvY2tfcGFzc3dkOiBmYWxzZQogICAgIyBQYXNzd29yZCBzZXQgdG8gQWRtaW4hMjMKICAgIHBhc3N3ZDogJyQ2JDhqTFl1STV1TGdwdUVWRmMkdUZsUEJtRk9Wb2RmV2I1OVZKSElTd0puY2JDV2p5ZVdkSVBhSExIZlRaaVFva1lIZnhPQlV3d1NqbEVxQUxic05UT1J2RjJRTTNZZUk2dlVDbU9pZi8nCiAgICBzaGVsbDogL2Jpbi9iYXNoCgpwYWNrYWdlX3VwZGF0ZTogdHJ1ZQoKYXB0OgogIHNvdXJjZXM6CiAgICBkb2NrZXIubGlzdDoKICAgICAgc291cmNlOiBkZWIgW2FyY2g9YW1kNjRdIGh0dHBzOi8vZG93bmxvYWQuZG9ja2VyLmNvbS9saW51eC91YnVudHUgZm9jYWwgc3RhYmxlCiAgICAgIGtleWlkOiA5REM4NTgyMjlGQzdERDM4ODU0QUUyRDg4RDgxODAzQzBFQkZDRDg4CgpwYWNrYWdlczoKICAtIGFwdC10cmFuc3BvcnQtaHR0cHMKICAtIGNhLWNlcnRpZmljYXRlcwogIC0gY3VybAogIC0gZ251cGcKICAtIGxzYi1yZWxlYXNlCiAgLSB3Z2V0CiAgLSBkb2NrZXItY2UKICAtIGRvY2tlci1jZS1jbGkKICAtIGNvbnRhaW5lcmQuaW8KICAtIG5ldC10b29scwogIC0gemlwCiAgLSBqcQoKZGlza19zZXR1cDoKICAvZGV2L3NkYjoKICAgIHRhYmxlX3R5cGU6IGdwdAogICAgbGF5b3V0OiBUcnVlCiAgICBvdmVyd3JpdGU6IFRydWUKCmZzX3NldHVwOgogIC0gZGV2aWNlOiAvZGV2L3NkYgogICAgZmlsZXN5c3RlbTogZXh0NAogICAgcGFydGl0aW9uOiAxCgptb3VudHM6CiAgLSBbIC9kZXYvc2RiMSwgL2RhdGEsICJhdXRvIiwgImRlZmF1bHRzLG5vZXhlYyxub2ZhaWwiIF0KCndyaXRlX2ZpbGVzOgogIC0gcGF0aDogL2V0Yy9jYS5jZXJ0CiAgICBjb250ZW50OiB8CiAgICAgIC0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQogICAgICBNSUlGd3pDQ0E2dWdBd0lCQWdJVU5JeEsvd29RZXpJcFFQa0VHamRpSjI3NlIxNHdEUVlKS29aSWh2Y05BUUVOCiAgICAgIEJRQXdjVEVMTUFrR0ExVUVCaE1DVlZNeEN6QUpCZ05WQkFnTUFsWkJNUkF3RGdZRFZRUUhEQWRCYzJoaWRYSnUKICAgICAgTVFzd0NRWURWUVFLREFKVFJURVJNQThHQTFVRUN3d0lVR1Z5YzI5dVlXd3hJekFoQmdOVkJBTU1HblZpZFc1MAogICAgICBkUzF1ZGkwd01TNWxibll4TG14aFlpNTBaWE4wTUI0WERUSTBNRFV4TmpFMk16Y3dOMW9YRFRNME1EVXhOREUyCiAgICAgIE16Y3dOMW93Y1RFTE1Ba0dBMVVFQmhNQ1ZWTXhDekFKQmdOVkJBZ01BbFpCTVJBd0RnWURWUVFIREFkQmMyaGkKICAgICAgZFhKdU1Rc3dDUVlEVlFRS0RBSlRSVEVSTUE4R0ExVUVDd3dJVUdWeWMyOXVZV3d4SXpBaEJnTlZCQU1NR25WaQogICAgICBkVzUwZFMxdWRpMHdNUzVsYm5ZeExteGhZaTUwWlhOME1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBZzhBCiAgICAgIE1JSUNDZ0tDQWdFQWtoRWgyR25WYk5qU2FGRG1DbVVJL2R0enlJdExDc0FzamtkQ21KY2srVXRSU2FaWU41S1IKICAgICAgVjJZZzhVQ25uUTU4ZVdxL2ZTNXpzWXFjeklERytKc3c5Q3grNkFINm9iQ0Y4S0Vwd2hVN3ZMejc4ZVp3NjQ5egogICAgICBtcE9NRTN6c1FOcGpxRk1TdjNmVXhkV0wrSTREdVBoWWpqYTM1aHJFNVRGa2NOc0RvQzdjU29pY2JNbytPa3BHCiAgICAgIFA4OXNFcjVZYUcwZDUvNndkOC9wL29LRmtYOFFrcTNiaFdLd2d6MUNCNWNDdlpvN2I3WEphT1FDRld0aHpJK0wKICAgICAgVEtYaitCbU5KNnhPd25zcWltdFZpVk9WMEdSTXU3YmQvZllXaTNlSDQzNlRIbDl3NEVGenBxb2RmWTgrcmVCNwogICAgICB3d3psNGFkMklvNkFXR0Jzb2JRbnM4MmdjUnh6d2RSSVVqeWRBN0hrdVAxbE1SZ2N6NThzOE1rSGdHRDVhMytaCiAgICAgIEdNTWU5MGxXVWE2dlNGUHl4Vzg4T1EvbEtta1hxWCtZdVlLUnNWNW8yLzVvVjU5VWc0dGxiRFpXNndxam1BTFgKICAgICAgejJUdkU0UmpYTERqNmZOU2lLeWdXa3VIaDh1ZS9uY0NpV2JjeHhiMGtXVnRINHkzcFEzZ2c0c20xcU1nenljTQogICAgICBrVURxN1N5akJLcXNZem44MkwyVHN4a3B0Ny9TcHBQaEdLU1p4eGZleUlEbS9yT1dLQTNidDFITzVMK3VPclVDCiAgICAgIEVKdmxzMjZrN2dWR0xQQ3IyY1EzRG56eHpqVXhsM2pVbWZMN2tvQ21PM3dmTUVTZkh4TzlxcXQ5cjU4QWVsYlkKICAgICAgMFhUNG43aE1OSS9wa2owZW1UWThxWE0xQVdFRkQ5TE4vSkYxRnhUL1BOdDFSb1VqZ3MwekZCTUNBd0VBQWFOVAogICAgICBNRkV3SFFZRFZSME9CQllFRkc0aHluaTdaTnhMY1psY0hnVm1WS0ozQ043N01COEdBMVVkSXdRWU1CYUFGRzRoCiAgICAgIHluaTdaTnhMY1psY0hnVm1WS0ozQ043N01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRU4KICAgICAgQlFBRGdnSUJBQzUxMDNJRVFiUGFZemdjNkJxUVhSQmxKdHgzRVQ0T2syemxtWW1KWnhXRTFoUURabW5LL0s5QQogICAgICB0Qm5BeHVNRFdwdy9qTlFKd3dwNHJUWFRzd0J2UG93alFGMDJjS3BoV3lUNjhNdlZTNzNHK1pzay8rdDRFR0ZYCiAgICAgIFJjT0pCelNRWm1GYXNFdEZQVnhCMVl4SnYxeEN0eERQTjdGQ0pRRkxuMHBodGQ0SUlPUEZUbWQ1c2FaV2Q2TnkKICAgICAgamE3dW1pTFI0SWxuTzZzZlFnVTQ2d1NscHZ2MlV5UFZLSlRscTVWR3dwMnhrajhZcVlWUCtOVE9DVXN2eldicAogICAgICByeU5TVmIzdlU4Q1hvcDRIaEdIL2IrMEFWT2QyZWZyVWtIL1o0L0hGZ1BWVlkrVUlRN0tzR29lZG10THVHTzZHCiAgICAgIDdSbnBmNkxBUkVuU0cwbHYrZjUyc1lPb0dUMW80QTNmcjI0Zk1VM3l1c1hIRTBlMDcxZU1SZnBMR0pLRVE4UHkKICAgICAgK2VTVmNPOTRtckl5T25EK1NseitJeE9ZcktqYjFiN0ZmWDN3UzE1aEFkdjlvWTQ2c2RuR2t4elYyTXBDOHE1RQogICAgICBZN1RzbzNiQytqeGg5N29YRkd2TUkxUXZrbHQvZnZhem5MNGZmaFBkOUF0Z2hpczhjTlE1WXVCaEVXSDd6cDJwCiAgICAgICtHR3E3UnhQRFJVZ29KenRUcWJLeFAyNE9ZR05Jb0lkY2Z1VW91ZUJiQkxiT2NNZzRLYmwrNSt3RThzSVg3bDAKICAgICAgNzFDSlFIV0ZIU1lJSUgvK3dDZVNUbEMrL0JYSjRpOXhyVFd5YVZNRFZBZm5FN3dkanJydGtHQ3Z6cVhWOW9HMgogICAgICBMajI0MHBmZWRkRm5tT0Q0WDlZWEpsZDdUa0tpTjVmcmxGMnRBLytvOEhMb0RVb2g3Sks3CiAgICAgIC0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KICAgIG93bmVyOiAncm9vdDpyb290JwogICAgcGVybWlzc2lvbnM6ICcwNDQ0JwogIC0gcGF0aDogL2V0Yy9jYS5rZXkKICAgIGNvbnRlbnQ6IHwKICAgICAgLS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCiAgICAgIE1JSUpRd0lCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1Mwd2dna3BBZ0VBQW9JQ0FRQ1NFU0hZYWRWczJOSm8KICAgICAgVU9ZS1pRajkyM1BJaTBzS3dDeU9SMEtZbHlUNVMxRkpwbGcza3BGWFppRHhRS2VkRG54NWFyOTlMbk94aXB6TQogICAgICBnTWI0bXpEMExIN29BZnFoc0lYd29TbkNGVHU4dlB2eDVuRHJqM09hazR3VGZPeEEybU9vVXhLL2Q5VEYxWXY0CiAgICAgIGpnTzQrRmlPTnJmbUdzVGxNV1J3MndPZ0x0eEtpSnhzeWo0NlNrWS96MndTdmxob2JSM24vckIzeituK2dvV1IKICAgICAgZnhDU3JkdUZZckNEUFVJSGx3SzltanR2dGNsbzVBSVZhMkhNajR0TXBlUDRHWTBuckU3Q2V5cUthMVdKVTVYUQogICAgICBaRXk3dHQzOTloYUxkNGZqZnBNZVgzRGdRWE9tcWgxOWp6NnQ0SHZERE9YaHAzWWlqb0JZWUd5aHRDZXp6YUJ4CiAgICAgIEhIUEIxRWhTUEowRHNlUzQvV1V4R0J6UG55end5UWVBWVBscmY1a1l3eDczU1ZaUnJxOUlVL0xGYnp3NUQrVXEKICAgICAgYVJlcGY1aTVncEd4WG1qYi9taFhuMVNEaTJWc05sYnJDcU9ZQXRmUFpPOFRoR05jc09QcDgxS0lyS0JhUzRlSAogICAgICB5NTcrZHdLSlp0ekhGdlNSWlcwZmpMZWxEZUNEaXliV295RFBKd3lSUU9ydExLTUVxcXhqT2Z6WXZaT3pHU20zCiAgICAgIHY5S21rK0VZcEpuSEY5N0lnT2IrczVZb0RkdTNVYzdrdjY0NnRRSVFtK1d6YnFUdUJVWXM4S3ZaeERjT2ZQSE8KICAgICAgTlRHWGVOU1o4dnVTZ0tZN2ZCOHdSSjhmRTcycXEzMnZud0I2VnRqUmRQaWZ1RXcwaittU1BSNlpOanlwY3pVQgogICAgICBZUVVQMHMzOGtYVVhGUDg4MjNWR2hTT0N6VE1VRXdJREFRQUJBb0lDQUJiVmNNb0krV0V6bitqSXhMMVpRQWVYCiAgICAgIE44bGc1UkZBSzNidWN0Mnh1d2p4bWpwK000bzBjbDRNVEJnS3VHa1g2Nk43YVlYakxoalNCMkw4dXA0QWZLMmYKICAgICAgQ3hPdnc0TmxPZnI4NXE4OWJJSTd0Tk1DNkNJYTRjS0hVRDEzcU9NV2dMKytoTTdEcDlKcGFLRXBhakdQT1NDNgogICAgICBNeE5ZbWZFT1FKcFgwb0JHOHc3L3ZoeFBuVnkxWWJmMTcvb2FJVzNwcU9Rc2IxKzdjK1BpZVlqZUtUUVUwNTFOCiAgICAgIGFUU0s3ZmlMeGRUbitHU2xNV0FoVEtZV2pFcFRJajZRTEV3TGlvSnFNRUc4eVZDc0tNbjM5QktJcTJvbzB4a3gKICAgICAgVUNMclE2WHZrb1lMKzNSREp4WWx2OGh5RFNWWFUyR1JjWnBOK0d5OGhCbk1zUTZ5UUFhZW5YY3hNSE5iZ1JhRgogICAgICBoQkpsSTI3RFRBY2phN3I0ZVpsbWZxN2xRQW1KUEhvdTRaNVF3ekliekhKS0VNeHdzaWhLUE1IOGlUQ0dScS9DCiAgICAgIG56c3JBYlZwcWVoeUliRmVST0RISWpYSFhZblZQc05jSG5zZVQ5SHBFdXdyRWFmT1Q4bTd0OGxWNUpUMEMxZC8KICAgICAgT3o4bllDcHhadWVrcGlaZEhpdFlhY2MzNTZUbUNXZWc0R2lNQ3NTdFRERmEyWmFuTnRONW9mNitCMUxndWNvUAogICAgICBzaC9OV29kNlFVNkJtM3o5RHpSVFZiY2x1MEFjTzYrYnpYQXZxQnZ6aHB5enNIaHhFVEp0TnY4cGlnS05jMGVmCiAgICAgIHQ0N0NaaFUrYXRZVTZOT05xUFdyaXFIeWdSNlRsT3dOdnc1TU9qMlEwOHM3bzBXNlpaTzkrZ3VrOWg3YXd4aisKICAgICAgMS9ETCtVZUZMelUrQi8yYnZNWlpBb0lCQVFDOUxQSEpZN1dZUjVUVDFIR2YxeHVCaFVqL1FOclR1RnZWbUNkawogICAgICBpczV4WGdXRWhnWDIvbXFrR0szWlRFeXJ6VUd3WVV4aEZ6OFNraWhxZUpBR2svLzVaMDEvOTN6ZVEvSnFUOHpPCiAgICAgIDBlK3QyRUFnSXFQckxoaHNKWGNyNGpTcE1IOHRsL1hWaHRWRGFLaGJaaWwxcDV3QW9HZkNQNVNZM1IrY1VIMkIKICAgICAgeWlqNXMvWFF6a1hQZXErWkppbXRpYnJVZFVBWSszQVdGVGJSTlJ1UXBiMnlNaEhLZHg4NnowblhUN0dGNmVjMQogICAgICBMblVabXZhZk44ZlFNZ3Q5ejdKWW5KZVA5Y3hzMHJqWldDVFRFNmsrRkhlWHVVYmhkZTZLQVR4aGp4TDRtVHQ5CiAgICAgIHprMnA2VUZSOHhBZVFMN2dQRlB5aVdSaWUxazg3d0ZYSE5Gdm5SWTFkSFA5dlZjVkFvSUJBUURGcWVUWmx5NE8KICAgICAgVURNb0psTHltaTJJckx4ZVV3VWgrRXAvNzJHUUpnV05FSXBXYUJ6UHp3a29WSjFRT0pVd0sxN004UnNMY0tNbwogICAgICBySWJwcEhkQlpSTVV6azhReklLZmJYM25RcmNvMXB5S2xXUGIvTGpBd2I0TW4zdk4vZTl4NkhEQ1loNVR6OHFpCiAgICAgICtJVXliRVQyOEEydTFFM25CNzFtUmJFQlNEYzcwWVRPbS9UTEwzeGxZS0x2akRRd2tZTkZ3NVZYVUgyTkhHN1AKICAgICAgQ1BOaGRXK0VVQ0YwWnExZW9Tek10Y3g0WW1YZlA5dmJQTnhCTHBuTVplQ0hOTXBRSlhPcXA2Y2trK0xUUE01TwogICAgICA0eFd2NzZzWWMvTzdPdDMyNlBuUzZ0bDdIdGpRZ1U0eVFVaHBlSU9IbU0rc1k2amlOUnZXT1dnSkhMaHFHVFNjCiAgICAgIGh3cnNiU3lOZTRpSEFvSUJBUUNJVjlaRHNhdDEvMUZTZ3ZFSnBMMWNValhVVW1mazVDQzhCeGVOTFVXeEMzU3EKICAgICAgbVBXL21Jby9qdEh0cFVJMUtKQkprVGE5VzBYSUdyTXFXWTVrVDFMVDdCSTlRcUFxaVlveitTUEJoQ2xjZ0ZsbgogICAgICBUOUFZZG5aL3Exa0N0ZHdDZk1PTWx0TkZmQkpFclM5NkFGMnRRSW45SVo3bXIzQm41Q2NlUUJ6VTZHRXo1dklwCiAgICAgIDlpRDJjcFFRcXlLcXduTjNJTEo3enV4djNnWk9MaHFaMi9xbWJkUEl1cVkxZXFUYm04SjBvNnBSK0JQSnlwZ3AKICAgICAgRk1qY1V0VlpiZEk2YjFJRkhjQ2lSaFdZQUNFNlNCZFllT1BnNUZZanRSMmhOVmJSY1k3WXdZZlJHbGw3Tm5RdgogICAgICBuaUZseklCRm1QVmYvb250T0wyT1h5djJIdjBMbG9vbEtMTllrNWdwQW9JQkFRQ2tkUEZLTktXR0ZTWXJEby9PCiAgICAgIDk0WlJBOThKMzZzU2syRnd4anQzVXBzbHZoQkxTZjVHekN3RFdUczE1bzRCOE9QRVFncE5YMTd3MVhLK2JDOG8KICAgICAgd3E2NGpkcHMwS3NSZUdqYmc3K2VnOGprNk55WHlOSHkxbitJUXgwZnkxcHdmSU5zeDNRU0tYMmdVSU9KNjFrSgogICAgICAxN3Fhcmx0T2tEcitINWZneURQa1dqTlVMNS9oZWRYWEJ5c3BnWTVlcG9NQkJYUjRuQ2lKd3BGVFFsQTAweCtBCiAgICAgIGg2YitFUHZJRXZPU011UTNlUzduSzF1Q01rWFRHYkd1eFVpbFZiL0tKUTd5ZXVEdTV2Zys1b1dFVHgzWkx1QTgKICAgICAgelNTSnI3WEQzQjBYWm55aUdvMHNGWmw0NktZVjBzWWtpSGlwSnBYNTkxUDh6ZkNJUEZRWE9uZHlrRXovWHVwRgogICAgICBvUFY3QW9JQkFGQ09KMGZMYWhpSEo3VmcwU1ZyVjhSNHA5ejA0dlpvME4rY1NCN2V4WkNVVmRsdlMrOXp2VDhrCiAgICAgIFZEckZ4di9xWGYwenBDYW1FL1liUmVjQVVteW1pM1FhOG9jVVBRazJwcGdiVXBhelZxTHh1bjVqMUFTcEE4ZlMKICAgICAgdTlIZXh2WVYyZ1MrN2lyelVkZkZyYXFZbHdoeXdCaXVlcXZmeVkvWC9XY3lmcStWWERta0pBM3Zob21LK0c5SwogICAgICB6cUszV3FiQ3pGZ2J4TjNKZURoUldXSW13c2hGZlRlZ1ZQd3p4RllSS1kyYkJXRCtEcHpXbmhHNDNaeXVFendECiAgICAgIHlhM3IzSjZic0xRTHJ2QW1EeERnQk1wbytRbW9LY0FIYkJDNjdDZU9sV0EyRGtoSFA3YzlKMnRGTmtyQkQ5TGcKICAgICAgUjF0S0lLSFk1emc1c3NSMUlya2Y3RTlaT0VCZm9XQT0KICAgICAgLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQogICAgb3duZXI6ICdyb290OnJvb3QnCiAgICBwZXJtaXNzaW9uczogJzA0NDQnCiAgLSBwYXRoOiAvaGFyYm9yL2luc3RhbGwtaGFyYm9yLnNoCiAgICBjb250ZW50OiB8CiAgICAgICMhL2Jpbi9iYXNoCiAgICAgIGNkIC9oYXJib3IKICAgICAgL2hhcmJvci9pbnN0YWxsLnNoIC0td2l0aC10cml2eQogICAgICBpZiBbICQ/IC1uZSAwIF0KICAgICAgdGhlbgogICAgICAgIGVjaG8gIkZhaWxlZC4gVHJ5aW5nIGFnYWluIgogICAgICAgIC9oYXJib3IvaW5zdGFsbC5zaCAtLXdpdGgtdHJpdnkKICAgICAgZmkKICAgIG93bmVyOiAncm9vdDpyb290JwogICAgcGVybWlzc2lvbnM6ICcwNzU1JwogIC0gcGF0aDogL2hhcmJvci9oYXJib3IueW1sCiAgICBjb250ZW50OiB8CiAgICAgIGhvc3RuYW1lOiBoYXJib3IuaDJvLTQtMjQ1MzIuaDJvLnZtd2FyZS5jb20KICAgICAgaHR0cHM6CiAgICAgICAgcG9ydDogNDQzCiAgICAgICAgIyBUaGUgcGF0aCBvZiBjZXJ0IGFuZCBrZXkgZmlsZXMgZm9yIG5naW54CiAgICAgICAgY2VydGlmaWNhdGU6IC9oYXJib3IvY2VydHMvaGFyYm9yLmNlcnQKICAgICAgICBwcml2YXRlX2tleTogL2hhcmJvci9jZXJ0cy9oYXJib3Iua2V5CiAgICAgIGV4dGVybmFsX3VybDogaHR0cHM6Ly9oYXJib3IuaDJvLTQtMjQ1MzIuaDJvLnZtd2FyZS5jb20KICAgICAgaGFyYm9yX2FkbWluX3Bhc3N3b3JkOiBIYXJib3IxMjM0NQogICAgICBkYXRhYmFzZToKICAgICAgICBwYXNzd29yZDogcm9vdDEyMwogICAgICAgIG1heF9pZGxlX2Nvbm5zOiAxMDAKICAgICAgICBtYXhfb3Blbl9jb25uczogOTAwCiAgICAgICAgY29ubl9tYXhfbGlmZXRpbWU6IDVtCiAgICAgICAgY29ubl9tYXhfaWRsZV90aW1lOiAwCiAgICAgIGRhdGFfdm9sdW1lOiAvZGF0YQogICAgICB0cml2eToKICAgICAgICBpZ25vcmVfdW5maXhlZDogZmFsc2UKICAgICAgICBza2lwX3VwZGF0ZTogZmFsc2UKICAgICAgICBza2lwX2phdmFfZGJfdXBkYXRlOiBmYWxzZQogICAgICAgIG9mZmxpbmVfc2NhbjogZmFsc2UKICAgICAgICBzZWN1cml0eV9jaGVjazogdnVsbgogICAgICAgIGluc2VjdXJlOiBmYWxzZQogICAgICBqb2JzZXJ2aWNlOgogICAgICAgIG1heF9qb2Jfd29ya2VyczogMTAKICAgICAgICBqb2JfbG9nZ2VyczoKICAgICAgICAgIC0gU1REX09VVFBVVAogICAgICAgICAgLSBGSUxFCiAgICAgICAgbG9nZ2VyX3N3ZWVwZXJfZHVyYXRpb246IDEgI2RheXMKICAgICAgbm90aWZpY2F0aW9uOgogICAgICAgIHdlYmhvb2tfam9iX21heF9yZXRyeTogMwogICAgICAgIHdlYmhvb2tfam9iX2h0dHBfY2xpZW50X3RpbWVvdXQ6IDMgI3NlY29uZHMKICAgICAgIyBMb2cgY29uZmlndXJhdGlvbnMKICAgICAgbG9nOgogICAgICAgIGxldmVsOiBpbmZvCiAgICAgICAgbG9jYWw6CiAgICAgICAgICByb3RhdGVfY291bnQ6IDUwCiAgICAgICAgICByb3RhdGVfc2l6ZTogMjAwTQogICAgICAgICAgbG9jYXRpb246IC92YXIvbG9nL2hhcmJvcgogICAgICAjVGhpcyBhdHRyaWJ1dGUgaXMgZm9yIG1pZ3JhdG9yIHRvIGRldGVjdCB0aGUgdmVyc2lvbiBvZiB0aGUgLmNmZyBmaWxlLCBETyBOT1QgTU9ESUZZIQogICAgICBfdmVyc2lvbjogMi45LjAKICAgICAgcHJveHk6CiAgICAgICAgaHR0cF9wcm94eToKICAgICAgICBodHRwc19wcm94eToKICAgICAgICBub19wcm94eToKICAgICAgICBjb21wb25lbnRzOgogICAgICAgICAgLSBjb3JlCiAgICAgICAgICAtIGpvYnNlcnZpY2UKICAgICAgICAgIC0gdHJpdnkKICAgICAgdXBsb2FkX3B1cmdpbmc6CiAgICAgICAgZW5hYmxlZDogdHJ1ZQogICAgICAgIGFnZTogMTY4aAogICAgICAgIGludGVydmFsOiAyNGgKICAgICAgICBkcnlydW46IGZhbHNlCiAgICAgIGNhY2hlOgogICAgICAgIGVuYWJsZWQ6IGZhbHNlCiAgICAgICAgZXhwaXJlX2hvdXJzOiAyNAogICAgb3duZXI6IHJvb3Q6cm9vdAogICAgcGVybWlzc2lvbnM6ICcwNjQ0JwogIC0gcGF0aDogL2hhcmJvci9jZXJ0cy92My5leHQKICAgIGNvbnRlbnQ6IHwKICAgICAgYXV0aG9yaXR5S2V5SWRlbnRpZmllcj1rZXlpZCxpc3N1ZXIKICAgICAgYmFzaWNDb25zdHJhaW50cz1DQTpGQUxTRQogICAgICBrZXlVc2FnZSA9IGRpZ2l0YWxTaWduYXR1cmUsIG5vblJlcHVkaWF0aW9uLCBrZXlFbmNpcGhlcm1lbnQsIGRhdGFFbmNpcGhlcm1lbnQKICAgICAgZXh0ZW5kZWRLZXlVc2FnZSA9IHNlcnZlckF1dGgKICAgICAgc3ViamVjdEFsdE5hbWUgPSBAYWx0X25hbWVzCiAgICAgIFthbHRfbmFtZXNdCiAgICAgIEROUy4xPWhhcmJvci5oMm8tNC0yNDUzMi5oMm8udm13YXJlLmNvbQogICAgb3duZXI6IHJvb3Q6cm9vdAogICAgcGVybWlzc2lvbnM6ICcwNjQ0JwpydW5jbWQ6CiAgLSBjdXJsIC1TTCBodHRwczovL2dpdGh1Yi5jb20vZG9ja2VyL2NvbXBvc2UvcmVsZWFzZXMvZG93bmxvYWQvdjIuMjcuMC9kb2NrZXItY29tcG9zZS1saW51eC14ODZfNjQgLW8gL3Vzci9sb2NhbC9iaW4vZG9ja2VyLWNvbXBvc2UKICAtIGNobW9kICt4IC91c3IvbG9jYWwvYmluL2RvY2tlci1jb21wb3NlCiAgLSBsbiAtcyAvdXNyL2xvY2FsL2Jpbi9kb2NrZXItY29tcG9zZSAvdXNyL2Jpbi9kb2NrZXItY29tcG9zZQogIC0gc3lzdGVtY3RsIGVuYWJsZSBkb2NrZXIKICAtIHN5c3RlbWN0bCBzdGFydCBkb2NrZXIKICAtIG1rZGlyIC1wIC9oYXJib3IvY2VydHMKICAtIG9wZW5zc2wgZ2VucnNhIC1vdXQgL2hhcmJvci9jZXJ0cy9oYXJib3Iua2V5IDQwOTYKICAtIG9wZW5zc2wgcmVxIC1zaGE1MTIgLW5ldyAtc3ViaiAiL0M9VVMvU1Q9VkEvTD1Bc2hidXJuL089U0UvT1U9UGVyc29uYWwvQ049aGFyYm9yLmgyby00LTI0NTMyLmgyby52bXdhcmUuY29tIiAta2V5IC9oYXJib3IvY2VydHMvaGFyYm9yLmtleSAtb3V0IC9oYXJib3IvY2VydHMvaGFyYm9yLmNzcgogIC0gb3BlbnNzbCB4NTA5IC1yZXEgLXNoYTUxMiAtZGF5cyAzNjUgLWV4dGZpbGUgL2hhcmJvci9jZXJ0cy92My5leHQgLUNBIC9ldGMvY2EuY2VydCAtQ0FrZXkgL2V0Yy9jYS5rZXkgLUNBY3JlYXRlc2VyaWFsIC1pbiAvaGFyYm9yL2NlcnRzL2hhcmJvci5jc3IgLW91dCAvaGFyYm9yL2NlcnRzL2hhcmJvci5jZXJ0CiAgLSB3Z2V0IC1xIGh0dHBzOi8vZ2l0aHViLmNvbS9nb2hhcmJvci9oYXJib3IvcmVsZWFzZXMvZG93bmxvYWQvdjIuOS40L2hhcmJvci1vZmZsaW5lLWluc3RhbGxlci12Mi45LjQudGd6CiAgLSB0YXIgLS1za2lwLW9sZC1maWxlcyAteHp2ZiBoYXJib3Itb2ZmbGluZS1pbnN0YWxsZXItdjIuOS40LnRnegogIC0gcm0gLWYgaGFyYm9yLW9mZmxpbmUtaW5zdGFsbGVyLXYyLjkuNC50Z3oKICAtIC9oYXJib3IvaW5zdGFsbC1oYXJib3Iuc2gK
---
apiVersion: vmoperator.vmware.com/v1alpha1
kind: VirtualMachine
metadata:
  labels:
    vm-selector: vmware-harbor
  name: vmware-harbor
spec:
  imageName: vmi-e41307c94604643de
  className: best-effort-xsmall
  powerState: poweredOn
  storageClass: vc01cl01-t0compute
  advancedOptions:
    defaultVolumeProvisioningOptions:
      thinProvisioned: true
  volumes:
  - name: harbor-vol
    persistentVolumeClaim:
      claimName: harbor-pvc
  networkInterfaces:
  - networkType: nsx-t
#    networkName: k8s-workload
  readinessProbe:
    tcpSocket:
      port: 22
  vmMetadata:
    configMapName: harbor-configmap
    transport: CloudInit
---
apiVersion: vmoperator.vmware.com/v1alpha1
kind: VirtualMachineService
metadata:
  name: vmware-harbor
spec:
  ports:
  - name: ssh
    port: 22
    protocol: TCP
    targetPort: 22
  - name: https
    port: 443
    protocol: TCP
    targetPort: 443
  selector:
    vm-selector: vmware-harbor
  type: LoadBalancer
